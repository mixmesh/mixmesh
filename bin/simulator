#!/bin/sh

usage()
{
    >&2 echo "simulator [--config CONFIG-FILE]"
    >&2 echo "    Run simulator"
    exit 100
}

config="--config /etc/obscrete.conf"

while :; do
    case $1 in
        --help | -h)
            usage
            ;;
        --config)
            if [ $# -lt 2 ]; then
                usage
            fi
            config="--config $2"
            shift
            ;;
        *)
            break
            ;;
    esac
    command shift
done

if [ "$#" -lt 0 ]; then
    usage
fi

bin_dir=${0%/*}
base_dir=${bin_dir}/../..
${bin_dir}/obscrete ${config} -- -noinput -run simulator start
